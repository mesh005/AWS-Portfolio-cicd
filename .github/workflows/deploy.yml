name: Basic deploy
on:
  push:
    branches: [ main ]

jobs:
  Deploy-static-site:
    runs-on: ubuntu-latest

    steps:
    - name: Create deploy-bucket
      uses: bitovi/github-actions-deploy-static-site-to-aws@v0.2.7
      with:
        aws_site_bucket_name: ${{ secrets.AWS_S3_BUCKET }}
        aws_access_key_id: ${{ secrets.AWS_ACCESS_KEY_ID }}
        aws_secret_access_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws_default_region: eu-west-2
        aws_site_source_folder: website

        tf_action: 'apply'
        tf_state_bucket_destroy: false

        aws_site_cdn_enabled: false
        aws_r53_domain_name: example.com 
        aws_r53_sub_domain_name: site
        aws_r53_create_sub_cert: true
        
